import {safeParseDate} from '@/lib/format-date.js'

export function sortByStatus(a, b) {
  if (a.statut === 'En activité' && b.statut !== 'En activité') {
    return -1
  }

  if (a.statut !== 'En activité' && b.statut === 'En activité') {
    return 1
  }

  return 0
}

export function sortByEndDate(a, b) {
  const endDateA = safeParseDate(a.date_fin)
  const endDateB = safeParseDate(b.date_fin)
  if (endDateA && endDateB) {
    if (endDateA < endDateB) {
      return 1
    }

    if (endDateA > endDateB) {
      return -1
    }

    return 0
  }

  if (endDateA) {
    return -1
  }

  if (endDateB) {
    return 1
  }

  return 0
}

export function sortByRecurrence(a, b) {
  if (!a.date_debut || !b.date_debut) {
    return 0
  }

  const debutDateA = safeParseDate(a.date_debut)
  const debutDateB = safeParseDate(b.date_debut)

  if (!debutDateA && debutDateB) {
    return 1
  }

  if (!debutDateB && debutDateA) {
    return -1
  }

  if (!debutDateA && !debutDateB) {
    return 0
  }

  const yearA = debutDateA.getFullYear()
  const yearB = debutDateB.getFullYear()

  if (yearA === 1 && yearB !== 1) {
    return 1
  }

  if (yearA !== 1 && yearB === 1) {
    return -1
  }

  if (debutDateA > debutDateB) {
    return -1
  }

  if (debutDateA < debutDateB) {
    return 1
  }

  return 0
}
